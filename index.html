<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asistan Pro - Resmi SÃ¼rÃ¼m</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #f8fafc; overflow-x: hidden; }
        .gradient-nav { background: linear-gradient(135deg, #4338ca 0%, #6366f1 100%); }
        .card-shadow { box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.05), 0 8px 10px -6px rgba(0, 0, 0, 0.05); }
        .wheel-anim { transition: transform 4s cubic-bezier(0.15, 0, 0.15, 1); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Ä°konlar (SVG formatÄ±nda iÃ§ine gÃ¶mÃ¼ldÃ¼ - Beyaz ekranÄ± Ã¶nler)
        const Icons = {
            Plus: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>,
            Trash: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>,
            Lock: () => <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>,
            Users: () => <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
        };

        function App() {
            const [page, setPage] = useState('dashboard');
            const [classes, setClasses] = useState([]);
            const [selectedClass, setSelectedClass] = useState(null);
            const [students, setStudents] = useState([]);
            const [isLocked, setIsLocked] = useState(true);
            const [rotation, setRotation] = useState(0);
            const [winner, setWinner] = useState(null);

            useEffect(() => {
                const saved = localStorage.getItem('asistan_v3');
                if (saved) setClasses(JSON.parse(saved));
            }, []);

            useEffect(() => {
                if (selectedClass) {
                    const s = localStorage.getItem(`std_${selectedClass.id}`);
                    setStudents(s ? JSON.parse(s) : []);
                }
            }, [selectedClass]);

            const auth = (fn) => {
                if (!isLocked) { fn(); return; }
                const pin = prompt("Ã–ÄŸretmen PIN: (1234)");
                if (pin === "1234") { setIsLocked(false); fn(); }
                else { alert("HatalÄ±!"); }
            };

            const addClass = () => {
                const n = prompt("SÄ±nÄ±f Ä°smi:");
                if (n) {
                    const newC = [...classes, {id: Date.now(), name: n}];
                    setClasses(newC);
                    localStorage.setItem('asistan_v3', JSON.stringify(newC));
                }
            };

            const deleteClass = (id, e) => {
                e.stopPropagation();
                auth(() => {
                    const newC = classes.filter(c => c.id !== id);
                    setClasses(newC);
                    localStorage.setItem('asistan_v3', JSON.stringify(newC));
                });
            };

            const addStudents = () => {
                const raw = prompt("Ã–ÄŸrenci Listesini YapÄ±ÅŸtÄ±rÄ±n (Her satÄ±ra bir isim):");
                if (raw) {
                    const parsed = raw.split('\n').filter(l => l.trim()).map(l => ({id: Math.random(), name: l}));
                    setStudents(parsed);
                    localStorage.setItem(`std_${selectedClass.id}`, JSON.stringify(parsed));
                }
            };

            return (
                <div className="min-h-screen pb-20">
                    <nav className="gradient-nav text-white p-5 shadow-lg flex justify-between items-center">
                        <div className="flex items-center gap-2 cursor-pointer" onClick={() => {setPage('dashboard'); setSelectedClass(null);}}>
                            <span className="text-2xl font-black tracking-tighter">ASÄ°STAN <span className="text-yellow-400">PRO</span></span>
                        </div>
                        <button onClick={() => isLocked ? auth(()=>{}) : setIsLocked(true)} 
                            className={`px-6 py-2 rounded-2xl font-bold flex items-center gap-2 transition-all ${isLocked ? 'bg-red-500/20 text-red-100 border border-red-500/50' : 'bg-green-500 shadow-lg shadow-green-500/30'}`}>
                            <Icons.Lock /> {isLocked ? "KÄ°LÄ°TLÄ°" : "AÃ‡IK"}
                        </button>
                    </nav>

                    <main className="max-w-7xl mx-auto p-6 md:p-12">
                        {page === 'dashboard' && (
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
                                <div onClick={() => auth(addClass)} className="h-56 border-4 border-dashed border-slate-300 rounded-[3rem] flex flex-col items-center justify-center text-slate-400 hover:border-indigo-500 hover:text-indigo-500 cursor-pointer transition-all bg-white/50">
                                    <Icons.Plus /> <span className="font-bold text-xl mt-2">SÄ±nÄ±f Ekle</span>
                                </div>
                                {classes.map(c => (
                                    <div key={c.id} onClick={() => {setSelectedClass(c); setPage('list');}} 
                                        className="bg-white p-10 rounded-[3rem] card-shadow border-b-[12px] border-indigo-600 hover:-translate-y-2 transition-all cursor-pointer relative group">
                                        <button onClick={(e) => deleteClass(c.id, e)} className="absolute top-8 right-8 text-red-300 opacity-0 group-hover:opacity-100 transition hover:text-red-500">
                                            <Icons.Trash />
                                        </button>
                                        <div className="bg-indigo-50 w-16 h-16 rounded-2xl flex items-center justify-center mb-6 text-indigo-600"><Icons.Users /></div>
                                        <h3 className="text-3xl font-black text-slate-800">{c.name}</h3>
                                        <p className="text-slate-400 font-bold mt-2 uppercase tracking-widest text-xs">YÃ¶netmek Ä°Ã§in TÄ±klayÄ±n</p>
                                    </div>
                                ))}
                            </div>
                        )}

                        {selectedClass && (
                            <div className="space-y-8">
                                <div className="flex gap-2 p-2 bg-slate-200/50 rounded-2xl w-fit">
                                    <button onClick={() => setPage('list')} className={`px-8 py-3 rounded-xl font-black text-sm ${page==='list'?'bg-white text-indigo-600 shadow-sm':'text-slate-500'}`}>LÄ°STE</button>
                                    <button onClick={() => setPage('wheel')} className={`px-8 py-3 rounded-xl font-black text-sm ${page==='wheel'?'bg-white text-indigo-600 shadow-sm':'text-slate-500'}`}>KURA</button>
                                </div>

                                {page === 'list' && (
                                    <div className="bg-white rounded-[3rem] card-shadow overflow-hidden">
                                        <div className="p-10 border-b flex justify-between items-center bg-slate-50/50">
                                            <h2 className="text-2xl font-black text-indigo-900 uppercase tracking-tighter">{selectedClass.name} / Ã–ÄžRENCÄ° LÄ°STESÄ°</h2>
                                            <button onClick={() => auth(addStudents)} className="bg-indigo-600 text-white px-8 py-4 rounded-2xl font-bold shadow-lg shadow-indigo-200">HÄ±zlÄ± Liste Ekle</button>
                                        </div>
                                        <div className="p-8 grid grid-cols-1 md:grid-cols-2 gap-4">
                                            {students.map((s, i) => (
                                                <div key={s.id} className="p-5 bg-slate-50 rounded-2xl border border-slate-100 font-bold text-slate-700 flex justify-between">
                                                    <span>{i+1}. {s.name}</span>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                )}

                                {page === 'wheel' && (
                                    <div className="bg-indigo-900 rounded-[4rem] p-16 text-center text-white card-shadow flex flex-col items-center">
                                        <div style={{transform: `rotate(${rotation}deg)`}} className="w-72 h-72 md:w-96 md:h-96 rounded-full border-[12px] border-white/10 flex items-center justify-center wheel-anim bg-gradient-to-br from-indigo-500 to-purple-600 shadow-2xl mb-12 relative">
                                            <div className="absolute -top-8 left-1/2 -translate-x-1/2 w-8 h-12 bg-yellow-400 shadow-xl" style={{clipPath:'polygon(50% 100%, 0 0, 100% 0)'}}></div>
                                            <span className="text-8xl opacity-20">ðŸŽ¡</span>
                                        </div>
                                        <button onClick={() => {
                                            const r = rotation + 1800 + Math.random()*360;
                                            setRotation(r);
                                            setTimeout(() => setWinner(students[Math.floor(Math.random()*students.length)]), 4000);
                                        }} className="bg-yellow-400 text-indigo-950 px-20 py-6 rounded-[2.5rem] font-black text-3xl shadow-2xl hover:scale-105 transition-all active:scale-95">Ã‡EVÄ°R!</button>
                                        {winner && <div className="mt-12 text-6xl font-black text-yellow-400 animate-bounce tracking-tighter">{winner.name}</div>}
                                    </div>
                                )}
                            </div>
                        )}
                    </main>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
